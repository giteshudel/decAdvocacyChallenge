---
title: "Auto Shop Productivity Analysis Report for Patrick"
subtitle: "Schedule recommendations for maximum productivity and revenue"
author: "Gitesh Kubal"
date: December 04, 2025
format:
  html:
    toc: true
    toc-depth: 3
    toc-location: left
    toc-title: "Contents"
    number-sections: false
    theme: cosmo
execute:
  echo: true
  eval: true
---

## The Verdict ðŸŽ¯

**Patrick, here is what your shops productivity data looks like:** Your overall presence at the shops has a positive impact on productivity. But it matters most at Shop 4 and least at Shop 3.

**Recommendations:** You should prioritize Shop 4 and least at Shop 3.




## The Data Behind the Verdict ðŸ“Š

The dataset contains 250 observations of daily productivity across 5 shops:

```{python}
#| echo: false
#| include: false
import pandas as pd

# Load the data
carsDF = pd.read_csv("carsFixed.csv")
```

```{python}
#| label: tbl-data-overview
#| tbl-cap: "Overview of the productivity data"
#| echo: false
#carsDF.head(10)
```

**Data Dictionary:**

- `observation`: Observation number (1-250)
- `shopID`: Shop identifier (1-5)
- `boss`: Binary indicator (0 = boss absent, 1 = boss present)
- `carsFixed`: Number of cars fixed that day

```{python}
#| label: tbl-data-summary
#| tbl-cap: "Summary statistics by shop and boss presence"
#| echo: false
#summary = carsDF.groupby(['shopID', 'boss'])['carsFixed'].agg(['count', 'mean', 'std', 'min', 'max']).round(2)
#summary
```

## Analysis: What Does the Data Show? ðŸ“ˆ

### Visualizing All 250 Data Points

Let's visualize all 250 observations to see how productivity varies by shop and whether Patrick (the boss) was present:

```{python}
#| label: fig-all-data-points
#| fig-cap: "All 250 data points showing daily productivity by shop and boss presence. Each point represents one day. Points are jittered horizontally to reduce overlap."
#| echo: false
import matplotlib.pyplot as plt
import seaborn as sns
import numpy as np

# Set style
sns.set_style("whitegrid")

# Import for KDE
from scipy.stats import gaussian_kde

# Create figure with 5 subplots stacked vertically with shared x-axis
fig, axes = plt.subplots(5, 1, figsize=(8, 14), sharex=True)
fig.suptitle('Productivity Distribution by Shop and Boss Presence: All 250 Days of Data', 
             fontsize=14, fontweight='bold', y=0.995)

# Prepare data for plotting
carsDF['boss_label'] = carsDF['boss'].map({0: 'Boss Absent', 1: 'Boss Present'})

# Determine common bin range based on all data for consistent comparison
all_cars = carsDF['carsFixed']
common_bins = np.arange(all_cars.min(), all_cars.max() + 2, 2)
x_range = np.linspace(all_cars.min(), all_cars.max(), 200)

# Create histogram for each shop
for shop_id in range(1, 6):
    ax = axes[shop_id - 1]
    shop_data = carsDF[carsDF['shopID'] == shop_id]
    
    # Get data for boss absent and present
    boss_absent = shop_data[shop_data['boss'] == 0]['carsFixed']
    boss_present = shop_data[shop_data['boss'] == 1]['carsFixed']
    
    # Calculate statistics
    mean_absent = boss_absent.mean()
    mean_present = boss_present.mean()
    diff = mean_present - mean_absent
    n_absent = len(boss_absent)
    n_present = len(boss_present)
    
    # Plot histograms with common bins
    n_absent_hist, bins_absent, patches_absent = ax.hist(boss_absent, bins=common_bins, alpha=0.6, color='#5dade2', 
            label=f'Boss Absent (n={n_absent}, avg={mean_absent:.1f})', 
            edgecolor='black', linewidth=0.5)
    n_present_hist, bins_present, patches_present = ax.hist(boss_present, bins=common_bins, alpha=0.6, color='#2ca02c', 
            label=f'Boss Present (n={n_present}, avg={mean_present:.1f})', 
            edgecolor='black', linewidth=0.5)
    
    # Add KDE distribution curves
    if len(boss_absent) > 1:
        kde_absent = gaussian_kde(boss_absent)
        density_absent = kde_absent(x_range)
        # Scale density to match histogram frequency scale
        bin_width = common_bins[1] - common_bins[0]
        scaled_density_absent = density_absent * n_absent * bin_width
        ax.plot(x_range, scaled_density_absent, color='#5dade2', linewidth=2.5, alpha=0.9, linestyle='-')
    
    if len(boss_present) > 1:
        kde_present = gaussian_kde(boss_present)
        density_present = kde_present(x_range)
        # Scale density to match histogram frequency scale
        scaled_density_present = density_present * n_present * bin_width
        ax.plot(x_range, scaled_density_present, color='#2ca02c', linewidth=2.5, alpha=0.9, linestyle='-')
    
    # Add delta label with difference (floating, positioned to avoid legend)
    y_max = ax.get_ylim()[1]
    delta_text = f"Î” {diff:+.1f}"
    diff_color = '#2ca02c' if diff > 0 else '#5dade2' if diff < 0 else 'gray'
    ax.text(0.98, 0.75, delta_text, transform=ax.transAxes, 
            fontsize=10, fontweight='bold', color='white',
            verticalalignment='top', horizontalalignment='right',
            bbox=dict(boxstyle='round', facecolor=diff_color, alpha=1.0, edgecolor=diff_color, linewidth=2))
    
    # Customize each subplot
    ax.set_title(f'Shop {shop_id}', fontsize=11, fontweight='bold', pad=5)
    ax.set_ylabel('Number of Days', fontsize=9)
    ax.grid(True, alpha=0.3, axis='y')
    # Position legend in upper right corner
    ax.legend(fontsize=7, loc='upper right', framealpha=0.95)

# Only show x-axis label on the bottom subplot
axes[-1].set_xlabel('Cars Fixed per Day', fontsize=11, fontweight='bold')

plt.tight_layout(pad=2.0, h_pad=1.5)
plt.show()
```

### Which Shops Benefit Most from Patrick's Presence?

Let's calculate the difference in average productivity when Patrick is present vs. absent for each shop:

```{python}
#| label: tbl-boss-impact
#| tbl-cap: "Impact of boss presence on productivity by shop"
#| echo: false
# Calculate mean productivity by shop and boss presence
impact = carsDF.groupby(['shopID', 'boss'])['carsFixed'].mean().unstack()
impact.columns = ['Boss_Absent', 'Boss_Present']
impact['Difference'] = impact['Boss_Present'] - impact['Boss_Absent']
impact['Percent_Change'] = (impact['Difference'] / impact['Boss_Absent'] * 100).round(1)
impact = impact.round(2)
impact.index.name = 'Shop'
impact = impact.reset_index()
impact.columns = ['Shop', 'Avg When Boss Absent', 'Avg When Boss Present', 
                  'Difference (Cars/Day)', 'Percent Change (%)']
impact = impact.sort_values('Difference (Cars/Day)', ascending=False)
impact
```

```{python}
#| label: fig-boss-impact
#| fig-cap: "Average productivity difference when boss is present vs. absent. Positive values mean the shop benefits from Patrick's presence."
#| echo: false
fig, ax = plt.subplots(figsize=(8, 6))
# Calculate differences
shop_impact = carsDF.groupby(['shopID', 'boss'])['carsFixed'].mean().unstack()
shop_impact['Difference'] = shop_impact[1] - shop_impact[0]
shop_impact = shop_impact.sort_values('Difference', ascending=True)

# Create bar plot
colors = ['#2ca02c' if x > 0 else '#5dade2' for x in shop_impact['Difference']]
bars = ax.barh(range(1, 6), shop_impact['Difference'], color=colors, alpha=0.7, edgecolor='black', linewidth=1.5)

# Add value labels
for i, (shop, diff) in enumerate(zip(shop_impact.index, shop_impact['Difference'])):
    ax.text(diff + (0.5 if diff > 0 else -0.5), i+1, 
           f'{diff:+.1f} cars/day', 
           va='center', ha='left' if diff > 0 else 'right',
           fontweight='bold', fontsize=10)

ax.axvline(0, color='black', linestyle='-', linewidth=1)
ax.set_yticks(range(1, 6))
ax.set_yticklabels([f'Shop {i}' for i in shop_impact.index])
ax.set_xlabel('Difference in Average Cars Fixed per Day\n(Boss Present - Boss Absent)', 
             fontsize=12, fontweight='bold')
ax.set_title('Which Shops Benefit Most from Patrick\'s Presence?', 
             fontsize=14, fontweight='bold', pad=20)
ax.grid(True, alpha=0.3, axis='x')

plt.tight_layout()
plt.show()
```

**Key Findings:**

```{python}
#| echo: false
# Identify which shops benefit most
impact_analysis = carsDF.groupby(['shopID', 'boss'])['carsFixed'].mean().unstack()
impact_analysis['Difference'] = impact_analysis[1] - impact_analysis[0]
impact_analysis = impact_analysis.sort_values('Difference', ascending=False)

most_benefit = impact_analysis.index[0]
least_benefit = impact_analysis.index[-1]
most_benefit_diff = impact_analysis.loc[most_benefit, 'Difference']
least_benefit_diff = impact_analysis.loc[least_benefit, 'Difference']

# Display findings
from IPython.display import Markdown
findings_text = f"""
Based on the analysis above:

- **Shop {most_benefit} benefits MOST** from Patrick's presence: **+{most_benefit_diff:.1f} cars/day** on average when Patrick is present
- **Shop {least_benefit} benefits LEAST** (or may be hurt) by Patrick's presence: **{least_benefit_diff:.1f} cars/day** difference

The table and chart above show the complete picture for all 5 shops.
"""
Markdown(findings_text)
```




### What Your Report Should Include

Your report should answer these questions in a clear, concise way:

1. **What does the data show?**

   - Visualize all 250 data points showing productivity by shop and boss presence
   - Which shops benefit most from Patrick's presence? Which don't?

2. **What should Patrick do?**

   - Clear, specific recommendations: Which shops should he prioritize? Why?
   - What's the potential financial impact? (Revenue or profit implications)

3. **How confident can Patrick be?**

   - Explain uncertainty in plain terms an auto-mechanic can understand
   - What ranges of differences can he expect? (We only have 250 daysâ€”that's not a huge sample)
   - What could go wrong? What assumptions are you making?

4. **What does the future look like?**

   - Show at least one visualization of projected outcomes under different scheduling scenarios
   - Help Patrick see the potential impact of following your recommendations

**Remember:** Less is more. A focused, punchy report that Patrick can understand and act on is better than a long, complex analysis that confuses him.


##

The analysis report is based on 250 observations of daily productivity across 5 auto repair shops network owned by Patrick.


- Patrick can only be at one shop per day
- Different shops may respond differently to his presence
- Revenue depends on number of cars fixed (assume a fixed price per car)
- Historical patterns may not predict future performance perfectly
- Patrick loves visiting his brother who runs Shop 3

